---
title : "1. 基本操作"
layout : page
date : 2018-12-26 16：41
---



[TOC]



# 一 Basic operation

## 1.1 Constant

```python
tf.constant(value,dtype=None,shape=None,name='Const',verify_shape=False)
#verify_shape:常量的形状是否可以被更改,默认不可更改
a=tf.constant([2,2],name='a')
b=tf.constant([[0,1],[2,3]],name='b')
```

```python
tf.zeros(shape,dtype=tf.float32,name=None)
tf.zeros_like(shape,dtype=None,name=None,optimize=True)
tf.ones/tf.ones_like
```

```python
tf.fill(dims,value,name=None) #和np.full()
tf.fill([2,3],8)=>[[8,8,8],[8,8,8]]
```

```python
tf.lin_space(start,stop,num,name=None)
tf.range(start,limit=None,delta=1,dtype=None,name="range")
```

随机函数：

```python
tf.set_random_seed(seed)
#
tf.random_normal
tf.truncated_normal
tf.random_uniform
tf.random_shuffle
tf.random_crop
tf.multinominal
tf.random_gamma
```

<img src="/wiki/static/images/tf_operation.jpeg"  alt="operation">

```python
abs,negative,sign,reciprocal,square,round,sqrt,rsqrt,pow,exp
```

<img src="/wiki/static/images/tf_div.png"  alt="div">

数据类型。

## 1.2 Variables

<img src="/wiki/static/images/tf_variable.png"  alt="variable">

Variable的几个ops：

```python
x.initializer# 类似于属性
x.value()
x.assign()# 相当于赋值函数
x.assign_add(),assign_sub()#改变变量值，并把值存入变量中。
x.eval() #得到变量值
"""
sess.run(x.initializer)
print(x.eval())
"""
```

<img src="/wiki/static/images/tf_variable_init.png"  alt="variable_init">

<img src="/wiki/static/images/tf_variable_flow.png"  alt="variable_flow">

## 1.3 Placeholders

定义一个存储空间，来存储需要的值。

```python
tf.placeholder(dtype,shape=None,name=None)
```

使用feed_dict来给placeholder传递值。feed_dict可以给任何 feedable tensor 传递值。placeholder是必须传值的op。tf.Graph.is_feedable(tensor)

```python
#a=tf.placeholder(tf.float32)
#sess.run(feed_dict={a:2.0})
```



# 二 Update Variable

1. 使用assign

2. Optimizer(在库tf.train )中，trainable字段，一般都是True，表示需要更新。

   ```
   tf.Variable(inital_value=None,trainable=True,...)
   ```

   

# 三 Data import

```python
"""
tf.data.Dataset
tf.data.Iterator
tf.data.Dataset.from_tensor_slices((features,labels))
tf.data.Dataset.from_genertor(gen,output_types,output_shapes)
dataset.make_one_shot_iterator()
dataset.make_initializable_iterator()
dataset.shuffle(1000),dataset.repeat(100),dataset.batch(128)
"""
从文件中创建Dataset
tf.data.TextLineDataset(file)
tf.data.FixedLengthRecordDataset(file)
tf.data.TFRecordDataset(file)

```

疑问： 从文件中创建，对文件的数据的格式是否有要求？

tf.data 比placeholder快。

# 四 Lazy loading

避免Lazy loading，会导致重复的初始化。